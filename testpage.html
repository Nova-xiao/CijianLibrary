<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>此间纪念馆</title>
	  <link href="css/index.css" rel="stylesheet">
    <!-- Bootstrap -->
    <link href="css/bootstrap-4.4.1.css" rel="stylesheet">
	  
	 <script>
		 window.onload = function () {
			var current = 0;
			var papers = document.querySelectorAll('.paper');
			document.querySelector('#right-btn').addEventListener('click', function () {
				if(current >= papers.length){
					return
				}
				var curentPaper = papers[current];

				curentPaper.classList.add('current');
				curentPaper.classList.add('flip');

				Array.from(papers).forEach(function (paper, index) {
					if (index !== current) {
						paper.classList.remove('current');
					}
				});

				current += 1;

				// lazyloading, but load previously
				if((current >= 1)&&(current+1 < papers.length)){
					// only the papers between [2, length-1] have id attribute
					var imgsToload = papers[current+1].getElementsByTagName("img");
					Array.from(imgsToload).forEach(function(img, index){
						img.setAttribute("src", img.id);
					})
				}
			});
			 
			document.querySelector("#left-btn").addEventListener("click", function(){
				// current paper: current - 1
				// the previous current paper: current - 2
				
				if(current <= 0){
					return
				}
				current -= 1
				papers[current].classList.remove("flip")
				if(current <= 0){
					return
				}
				papers[current - 1].classList.add("current")
				
				Array.from(papers).forEach(function (paper, index) {
					if (index !== current - 1) {
						paper.classList.remove('current');
					}
				});
				
			})

		}

	 </script>
  </head>
	
	
  <body>

	<header>
	  <div class="jumbotron text-center" id="headerbg">
		<div class="col-12">
				  <h1>2017夏季刊</h1>
				  <p >杂志版第10期</p>
		</div>
		  <a href="index.html">
		  <button type="button" class="btn btn-secondary">返回主页</button>
          </a>
	   </div>
	</header>
	  
	  <div class="content">
			  <button type="button" class="btn btn-dark" id="left-btn"><img src="images/left-arrow.png"></button>
			  
		  <div class="fakebook"></div>
		  <div class="book">
				<div class="paper current">
					<div class="page front"><img src="images/2017sum/2017sum_001.jpg"></div>
					<div class="page back"><img src="images/2017sum/2017sum_002.jpg"></div>
				</div>
				<div class="paper">
					<div class="page front"><img src="images/2017sum/2017sum_003.jpg"></div>
					<div class="page back"><img src="images/2017sum/2017sum_004.jpg"></div>
				</div>
				<div class="paper">
					<div class="page front"><img id="images/2017sum/2017sum_005.jpg"></div>
					<div class="page back"><img id="images/2017sum/2017sum_006.jpg"></div>
				</div>
			  	<div class="paper">
					<div class="page front"><img id="images/2017sum/2017sum_007.jpg"></div>
					<div class="page back">END</div>
				</div>
			</div>
			  
			 <button type="button" class="btn btn-dark" id="right-btn"><img src="images/right-arrow.png"></button>

		  
		  
  </div>

	  
		

		
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) --> 
    <script src="js/jquery-3.4.1.min.js"></script> 
    <!-- Include all compiled plugins (below), or include individual files as needed --> 
    <script src="js/popper.min.js"></script> 
    <script src="js/bootstrap-4.4.1.js"></script>
  </body> 

</html>